#!/bin/bash
event_ids="5605 5610 5377 5415 5307 5224 5497 5476 5509 5298 5311 5337 5527 5447 5529 5536 5142 5290 5387 5613 5348 5212 5474 5398 5356 5305 5544 5611 5468 5394 5533 5417 5562 5601 5554 5360 5453 5588 5607 5185 5547 5566 5443 5425 5542 5416 5210 5440 5186 5446 5437 5582 5361 5319 5614 5483 5391 5552 5479 5543 5563 5594 5420 5334 5595 5526 5395 5475 5494 5590 5433 5405 5469 5380 5571 5500 5538 5223 5322 5619 5445 5478 5502 5426 5532 5712 5713 5550 5289 5467 5564 5278 5539 5421 5609 5495 5293 5444 5605 5376 5477 5281 5634 5449 5412 5622 5423 5618 5491 5577 5214 5537 5463 5612 5193 5339 5548 5459 5604 5608 5587 5406 5294 5192 5279 5499 5295 5545 5397 5304 5490 5593 5600 5255 5623 5413 5606"

header="$(cat header)"

for event in $event_ids; do
	file=30c3-$event.txt
	wget https://subtitles.pads.ccc.de/ep/pad/export/$event/latest?format=txt -O $file
	perl -pi -e 's/\r\n/\n/g' $file
	file_head="$(head -n 23 $file)"
	if [ "$file_head" == "$header" ]; then
		tail -n+24 $file > temp.txt 
 		rm $file
		mv temp.txt $file
	fi
done
